<html>
  <head>
    <link rel="stylesheet" href="sotc-character.css" />
    <script src="./e.js" type="text/javascript" charset="utf-8"></script>
    <script src="./j.js" type="text/javascript" charset="utf-8"></script>
    <script src="./a.js" type="text/javascript" charset="utf-8"></script>

    <script>
      function get_track_size( attr ) {
        var default_stat = 5,
            attr = parseInt( attr, 10 );
        if ( isNaN(attr) ) {
          return default_stat;
        }
        if ( attr < 5 ){
          attr += 5
        }
        return attr;
      }
      
      function generate_boxes( how_many, is_health ) {
        var top = is_health ? 915 : 939,
            left = 803,
            spacing = 28,
            len = 9 - how_many;
            
        for (var i = 0; i < len; i++){
          var box = document.createElement("div");
          box.className = "track-box";
          box.style.left = left;
          box.style.top = top;

          document.body.appendChild(box);
          left -= spacing;
        }
      }
      
      function char( name ) {
        return window[ name ];
      }
      
      function init_chooser() {
        var chooser = document.getElementById( "chooser" );
        chooser.onchange = function(){
          load_character( char(chooser.value) );
        }
      }
      
      function clear_boxes() {
        var boxes = document.getElementsByClassName( "track-box" );
        if ( boxes.length > 0 ){
          document.body.removeChild( boxes[0] );
          clear_boxes();
        }
      }

      function load_character( character ) {
        if ( character === undefined ){
          console.log("ERROR PARSING CHARACTER! NO CHARACTER!");
          return;
        }
        var inputs = document.getElementsByTagName( "input" ),
            textareas = document.getElementsByTagName( "textarea" ),
            stress = get_track_size( character[ "stress" ] ),
            health = get_track_size( character[ "health" ] );
                
        for ( var i = 0, len = inputs.length; i < len; i++ ){
          var input = inputs[ i ];
          input.value = character[ input.id ] || "";
        }

        for ( var i=0, len = textareas.length; i < len; i++ ) {
          var area = textareas[ i ];
          area.value = character[ area.id ] || "";
        }

        clear_boxes();
        generate_boxes( stress, false );
        generate_boxes( health, true );
      }

      window.onload = function(){
        load_character( char(document.getElementById( "chooser").value) );
        init_chooser();
      }
    </script>
  </head>
  <body>
    <select id="chooser">
      <option value="a" selected="selected">A</option>
      <option value="e">E</option>
      <option value="j">J</option>
    </select>
<!-- header -->
    <input id="name" type="text" disabled="disabled" />
    <input id="player" type="text" disabled="disabled" />
    <input id="concept" type="text" disabled="disabled" />
    <input id="archetype" type="text" disabled="disabled" />

<!-- aspects -->
    <div id="aspects">
      <input id="aspect1" type="text" disabled="disabled" />
      <input id="aspect2" type="text" disabled="disabled" />
      <input id="aspect3" type="text" disabled="disabled" />
      <input id="aspect4" type="text" disabled="disabled" />
      <input id="aspect5" type="text" disabled="disabled" />
      <input id="aspect6" type="text" disabled="disabled" />
      <input id="aspect7" type="text" disabled="disabled" />
      <input id="aspect8" type="text" disabled="disabled" />
      <input id="aspect9" type="text" disabled="disabled" />
      <input id="aspect10" type="text" disabled="disabled" />      
    </div>

<!-- skills -->
    <div id="skills">
      <input id="skill1" type="text" disabled="disabled" />
      <input id="skill2" type="text" disabled="disabled" />
      <input id="skill3" type="text" disabled="disabled" />
      <input id="skill4" type="text" disabled="disabled" />
      <input id="skill5" type="text" disabled="disabled" />
      <input id="skill6" type="text" disabled="disabled" />
      <input id="skill7" type="text" disabled="disabled" />
      <input id="skill8" type="text" disabled="disabled" />
      <input id="skill9" type="text" disabled="disabled" />
      <input id="skill10" type="text" disabled="disabled" />
      <input id="skill11" type="text" disabled="disabled" />
      <input id="skill12" type="text" disabled="disabled" />
      <input id="skill13" type="text" disabled="disabled" />
      <input id="skill14" type="text" disabled="disabled" />
      <input id="skill15" type="text" disabled="disabled" />      
    </div>

<!-- stunts -->
    <div id="stunts">
      <input id="stunt1" type="text" disabled="disabled" />
      <input id="stunt2" type="text" disabled="disabled" />
      <input id="stunt3" type="text" disabled="disabled" />
      <input id="stunt4" type="text" disabled="disabled" />
      <input id="stunt5" type="text" disabled="disabled" />
    </div>
    
<!-- gadgets -->
      <div id="gadgets">
        <input type="text" disabled="disabled" id="gadget1" />
        <input type="text" disabled="disabled" id="gadget2" />
        <input type="text" disabled="disabled" id="gadget3" />
        <input type="text" disabled="disabled" id="gadget4" />
        <input type="text" disabled="disabled" id="gadget5" />
      </div>
      <div id="upgrades">
        <input type="text" disabled="disabled" id="upgrade1" />
        <input type="text" disabled="disabled" id="upgrade2" />
        <input type="text" disabled="disabled" id="upgrade3" />
        <input type="text" disabled="disabled" id="upgrade4" />
        <input type="text" disabled="disabled" id="upgrade5" />
      </div>
<!-- phases -->
      <div id="phase1">
        <textarea disabled="disabled" id="phase1_events"></textarea>
        <input type="text" disabled="disabled" class="aspects" id="phase1_aspect1" />
        <input type="text" disabled="disabled" class="aspects" id="phase1_aspect2" />
      </div>
      
      <div id="phase2">
        <input type="text" disabled="disabled" id="phase2_patron" />
        <textarea disabled="disabled" id="phase2_events"></textarea>
        <input type="text" disabled="disabled" id="phase2_aspect1" class="aspects" />
        <input type="text" disabled="disabled" id="phase2_aspect2" class="aspects" />
      </div>
      
      <div id="phase3">
        <input type="text" disabled="disabled" id="phase3_novel" />
        <input type="text" disabled="disabled" id="phase3_guests" />
        <textarea disabled="disabled" id="phase3_events"></textarea>
        <input type="text" disabled="disabled" id="phase3_aspect1" class="aspects" />
        <input type="text" disabled="disabled" id="phase3_aspect2" class="aspects" />
      </div>
      
      <div id="phase4">
        <input type="text" disabled="disabled" id="phase4_starring" />
        <textarea disabled="disabled" id="phase4_events"></textarea>
        <input type="text" disabled="disabled" id="phase4_aspect1" class="aspects" />
        <input type="text" disabled="disabled" id="phase4_aspect2" class="aspects" />
      </div>
      
      <div id="phase5">
        <input type="text" disabled="disabled" id="phase5_starring" />
        <textarea disabled="disabled" id="phase5_events"></textarea>
        <input type="text" disabled="disabled" id="phase5_aspect1" class="aspects" />
        <input type="text" disabled="disabled" id="phase5_aspect2" class="aspects" />
      </div>
  </body>
</html>
